---
output:
  pdf_document:
    keep_tex: yes
    fig_caption: yes
    number_sections: yes
geometry: margin=2.54cm
title: "How bad is the current CO River drought?"
subtitle: "https://github.com/jbc70/Water_Data_Analytics_FinalProject"
author: "Jack Carpenter"
fontsize: 12pt
mainfont: Times New Roman

---
\newpage
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#setwd
getwd()

#load packages
library(tidyverse)
library(dataRetrieval)
library(cowplot)
library(lubridate)
library(lfstat)
library(sf)
library(maps)
library(gganimate)

#set ggplot theme
theme_set(theme_classic()+
            theme(axis.text = element_text(color = "black", size = 10)))
```

## Rationale and Research Question

The Colorado River Basin is experiencing a 20+ year drought that is repeatedly referred to as a 'megadrought' in the news media. The goal of this project is to vizualize the differences in discharge of the Colorado River and some of its major tributaries over the last 20 years compared to earlier, wetter, more 'normal' time frames.

Workflow/Process:
> 1. Identify where are there gages with reliable, long-enough datasets to make this comparison.
> 2. Separate data at 1999 - the current drought started in the 1999-2000 water year.
> 3. Examine and compare discharge patterns and volumes across the basin and between time periods.

\newpage

# Dataset Information
``` {r Read in the Data, include = FALSE, echo = FALSE}
#load the data - daily values is dv
#reading all the sites in at once, then going to separate them when wrangling
allsites.raw <- readNWISdv(siteNumbers = c("09209400",
                                           "09058000",
                                           "09234500",
                                           "09251000",
                                           "09095500",
                                           "09152500",
                                           "09315000",
                                           "09163500",
                                           "09180000",
                                           "09739500",
                                           "09380000",
                                           "09421500",
                                           "09520500",
                                           "09429490"),
                           parameterCd = "00060", #discharge in cfs
                           startDate = "", #no set start date
                           endDate = "2021-09-30") #through the latest water year

#rename columns to make sense
names(allsites.raw)[4:5] <- c("Discharge_cfs", "Approval_Code")

#write csv with data
#write_csv(allsites.raw, file = "./Data/Raw/allsites_raw.csv")
#commented out to allow knitting
```
Data was pulled from the United States Geologic Survey's (USGS) National Water Information System (NWIS) using the dataRetrieval package. Significant tributaries sampled alongside the Colorado include the Gunnison, Yampa, San Juan, Dolores, Green, Gila, and Virgin Rivers. Other relatively large tributaries exist, including the Little Colorado, Roaring Fork, and White rivers, but due to data constraints and an interest in keeping the size of the project under control only the largest tributaries with relatively consistent data were sampled. The gage sites selected were selected both for location convenience and the length of time the gage has been active. Most of these gages have been active since the 1950s, with several active as far back as the early 1900s. Since the data comes from the USGS, it has been subjected to rigorous cleaning and quality approval processes so it is considered to be accurate and trustworthy. 

Table 1: USGS Gages sampled. 

Gage Number | Location
------------|---------------
09209400    |Green River above Fontenelle Reservoir, WY
09058000    |CO River near Kremmling, CO
09234500    |Green River below Flaming Gorge Dam
09251000    |Yampa River upstream of junction w/ Green
09095500    |CO River upstream of Grand Junction, CO
09152500    |Gunnison River near Grand Junction, CO
09315000    |Green River at Green River, UT
09163500    |CO River downstream of Grand Junction, CO
09180000    |Dolores River just upstream of junction w/ Colorado
09379500    |San Juan River upstream of Lake Powell (intersection w/ the CO)
09380000    |CO River at Lee's Ferry, AZ
09421500    |CO River below Hoover Dam
09520500    |Gila River above Yuma, AZ
09429490    |CO River above Imperial Dam

Table 2:Datasets examined

Dataset | Information
--------|---------------

```{r }

```

## Exploratory Analysis

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
